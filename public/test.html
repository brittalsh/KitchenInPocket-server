<!doctype html>
<html>
<head></head>
<body>
  <h1>Hello world</h1>

  <!-- <form action="/api/v1/upload" enctype="multipart/form-data" method="POST"> -->
    <input name="file" type="file" id="file"/>
    <input type="submit" value="Upload" id="submit"/>
  <!-- </form> -->

  <script src="js/jquery.min-2.1.4.js"></script>
  <script type="text/javascript">
    $("#submit").click(function() {
      var data = new FormData();
      file = $("#file")[0].files[0];
      data.append("file", file);
      data.append("access_token", "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE0ODA1NTczODd9.g12OcHtaFjrNYR-TLWAKoscc8WagknfFjccwi8L_Has");
      data.append("recipe_name", "recipe1");
      data.append("recipe_file", file);
      data.append("ingredients", JSON.stringify([{name: "apple", amount: "11g"}, {name: "banana", amount: "12g"}]));
      data.append("steps", 2);
      data.append("steps_text", JSON.stringify(["cook apple", "cook banana"]));
      data.append("steps_file1", file);
      data.append("steps_file2", file);
      $.ajax({
        type: "POST",
        url: "/api/v2/recipes",
        // contentType: "multipart/form-data",
        // dataType: "json",
        data: data,
        contentType: false,
        processData: false,
        success: function(msg) {
          console.log(msg);
        },
        error: function(msg) {
          console.log("error: " + msg);
        }
      })
    })
  </script>
</body>
</html>